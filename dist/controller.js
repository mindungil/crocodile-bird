const s="다음 문장에서 직접적인 욕설이나 노골적인 비하 표현만 순화해줘. 은유적 표현이나 감정적 말투는 그대로 둬도 괜찮아. 단어를 약하게 바꾸거나 부드러운 유사어로 대체해줘. 문장의 분위기나 구조는 가능한 한 변경하지 말고, 최소한의 수정만 해줘. 변경 또는 제거된 내용에 대해 설명 없이 텍스트만 추출해줘.",c="다음 문장에서 직접적인 욕설, 인신 공격, 부모나 가족에 대한 비하, 조롱, 감정적 분노 표현 등을 모두 순화해줘. 우회적인 표현이더라도 공격적인 의미를 담고 있다면 부드럽고 중립적인 표현으로 바꿔줘. 원래의 의도나 정보는 유지하되 말투나 어조는 최대한 온화하게 바꿔줘. 변경 또는 제거된 내용에 대해 설명 없이 텍스트만 추출해줘.",r="다음 문장을 유아가 읽는다고 가정하고, 모든 부정적 정서, 감정적 공격, 암시성, 뉘앙스까지 순화해줘. 문장 내에 위협, 불쾌, 비하, 과격함, 슬랭, 분노, 조롱, 성적 표현 등이 들어 있다면 모두 제거하거나 긍정적이고 교육적 의미로 바꿔줘. 텍스트 전체를 정서적 안정감을 줄 수 있는 언어로 새로 써줘도 좋고, 말투와 단어를 모두 바꿔도 괜찮아. 변경 또는 제거된 내용에 대해 설명 없이 텍스트만 추출해줘.";chrome.runtime.onMessage.addListener(async(t,l,e)=>{if(console.log("서버와의 통신 시작22"),t.type=="crocodile-bird-clean"){try{console.log("서버와의 통신 시작11");const o=await a(t.text,t.num);e({cleaned:o})}catch(o){console.error(`clean Text 실패: ${o}`),e({cleaned:t.text})}return!0}});async function a(t,l){try{let e;l==1?e=s:l==2?e=c:l==3?e=r:(console.log("프롬프트 번호 수신 오류"),e=prompts.level_3),console.log(`message 프롬프트: ${e}`);const o=await fetch("http://localhost:3000/api/cleanText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:`${e}, 변경해야 할 텍스트: ${t}`}],num:l})});if(!o.ok)throw new Error(`서버 응답 실패: ${o.status}`);console.log(`서버 응답 상태: ${o.status}`);const n=await o.json();return console.log("서버 응답 데이터:",n),n.cleaned}catch(e){console.error(e)}}
